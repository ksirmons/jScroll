(function(e){e.fn.jScroll=function(t){function r(e){this.originalMargin=parseInt(e.css("margin-top"),10)||0;this.originalBottomMargin=parseInt(e.css("margin-bottom"),10)||0;console.debug(e.attr("id")+" margin - "+this.originalMargin);this.getMargin=function(t){var r=e.parent().offset().top-t.offset().top+t.scrollTop();var i=e.parent().height()-(e.outerHeight()+this.originalBottomMargin);if(i<0){i=0}var s=this.originalMargin;if(t.scrollTop()>r){var o=n.top+t.scrollTop()-r;if(o>s){s=o}}if(s>i){s=i}return{marginTop:s+"px"}}}var n=e.extend({},e.fn.jScroll.defaults,t);return this.each(function(){var t=e(this);var i=e(this).parent();var s=i.parent();var o=new r(t);s.on("scroll",function(){t.stop().animate(o.getMargin(s),n.speed)})})};e.fn.jScroll.defaults={speed:"slow",top:10}})(jQuery)